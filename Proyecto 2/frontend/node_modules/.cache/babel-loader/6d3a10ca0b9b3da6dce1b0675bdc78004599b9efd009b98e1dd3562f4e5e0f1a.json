{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, createVNode as _createVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelCheckbox as _vModelCheckbox } from \"vue\";\nconst _hoisted_1 = {\n  class: \"space-y-6\"\n};\nconst _hoisted_2 = {\n  class: \"md:flex md:items-center md:justify-between\"\n};\nconst _hoisted_3 = {\n  class: \"mt-4 flex md:mt-0 space-x-2\"\n};\nconst _hoisted_4 = {\n  class: \"bg-white shadow rounded-lg p-4\"\n};\nconst _hoisted_5 = {\n  class: \"grid grid-cols-1 md:grid-cols-4 gap-4\"\n};\nconst _hoisted_6 = [\"value\"];\nconst _hoisted_7 = [\"value\"];\nconst _hoisted_8 = {\n  class: \"flex items-center\"\n};\nconst _hoisted_9 = {\n  class: \"bg-white shadow rounded-lg\"\n};\nconst _hoisted_10 = {\n  class: \"px-4 py-5 sm:p-6\"\n};\nconst _hoisted_11 = {\n  class: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\"\n};\nconst _hoisted_12 = [\"onClick\"];\nconst _hoisted_13 = {\n  class: \"flex items-center justify-between mb-2\"\n};\nconst _hoisted_14 = {\n  class: \"font-medium text-gray-900\"\n};\nconst _hoisted_15 = {\n  class: \"text-sm text-gray-600 mb-1\"\n};\nconst _hoisted_16 = {\n  class: \"text-sm text-gray-600 mb-2\"\n};\nconst _hoisted_17 = {\n  class: \"text-xs text-gray-500\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" Header \"), _createElementVNode(\"div\", _hoisted_2, [_cache[4] || (_cache[4] = _createElementVNode(\"div\", {\n    class: \"min-w-0 flex-1\"\n  }, [_createElementVNode(\"h2\", {\n    class: \"text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight\"\n  }, \" Mapa GPS - Todas las Ubicaciones \")], -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"button\", {\n    onClick: $setup.toggleAutoRefresh,\n    class: _normalizeClass(['inline-flex items-center rounded-md px-3 py-2 text-sm font-semibold shadow-sm', $setup.autoRefresh ? 'bg-green-600 text-white hover:bg-green-700' : 'bg-gray-600 text-white hover:bg-gray-700'])\n  }, [_createVNode($setup[\"ArrowPathIcon\"], {\n    class: _normalizeClass([\"-ml-0.5 mr-1.5 h-5 w-5\", {\n      'animate-spin': $setup.autoRefresh\n    }])\n  }, null, 8 /* PROPS */, [\"class\"]), _createTextVNode(\" \" + _toDisplayString($setup.autoRefresh ? 'Auto-actualización ON' : 'Auto-actualización OFF'), 1 /* TEXT */)], 2 /* CLASS */), _createElementVNode(\"button\", {\n    onClick: $setup.refreshLocations,\n    class: \"inline-flex items-center rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-700\"\n  }, [_createVNode($setup[\"MapPinIcon\"], {\n    class: \"-ml-0.5 mr-1.5 h-5 w-5\"\n  }), _cache[3] || (_cache[3] = _createTextVNode(\" Actualizar Ubicaciones \"))])])]), _createCommentVNode(\" Map Controls \"), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", null, [_cache[6] || (_cache[6] = _createElementVNode(\"label\", {\n    class: \"block text-sm font-medium text-gray-700 mb-1\"\n  }, \"Filtrar por Usuario\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.selectedUser = $event),\n    onChange: $setup.filterVehicles,\n    class: \"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm\"\n  }, [_cache[5] || (_cache[5] = _createElementVNode(\"option\", {\n    value: \"\"\n  }, \"Todos los usuarios\", -1 /* HOISTED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.users, user => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: user.id,\n      value: user.id\n    }, _toDisplayString(user.nombre) + \" \" + _toDisplayString(user.apellido), 9 /* TEXT, PROPS */, _hoisted_6);\n  }), 128 /* KEYED_FRAGMENT */))], 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelSelect, $setup.selectedUser]])]), _createElementVNode(\"div\", null, [_cache[8] || (_cache[8] = _createElementVNode(\"label\", {\n    class: \"block text-sm font-medium text-gray-700 mb-1\"\n  }, \"Filtrar por Vehículo\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.selectedVehicle = $event),\n    onChange: $setup.filterVehicles,\n    class: \"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm\"\n  }, [_cache[7] || (_cache[7] = _createElementVNode(\"option\", {\n    value: \"\"\n  }, \"Todos los vehículos\", -1 /* HOISTED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.vehicles, vehicle => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: vehicle.id,\n      value: vehicle.id\n    }, _toDisplayString(vehicle.matricula) + \" - \" + _toDisplayString(vehicle.modelo), 9 /* TEXT, PROPS */, _hoisted_7);\n  }), 128 /* KEYED_FRAGMENT */))], 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelSelect, $setup.selectedVehicle]])]), _createElementVNode(\"div\", null, [_cache[10] || (_cache[10] = _createElementVNode(\"label\", {\n    class: \"block text-sm font-medium text-gray-700 mb-1\"\n  }, \"Mostrar Rutas\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_8, [_withDirectives(_createElementVNode(\"input\", {\n    id: \"show-routes\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.showRoutes = $event),\n    type: \"checkbox\",\n    class: \"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelCheckbox, $setup.showRoutes]]), _cache[9] || (_cache[9] = _createElementVNode(\"label\", {\n    for: \"show-routes\",\n    class: \"ml-2 block text-sm text-gray-900\"\n  }, \" Mostrar trayectorias \", -1 /* HOISTED */))])]), _createElementVNode(\"div\", {\n    class: \"flex items-end\"\n  }, [_createElementVNode(\"button\", {\n    onClick: $setup.centerMap,\n    class: \"w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50\"\n  }, \" Centrar Mapa \")])])]), _createCommentVNode(\" Map Container \"), _cache[16] || (_cache[16] = _createElementVNode(\"div\", {\n    class: \"bg-white shadow rounded-lg overflow-hidden\"\n  }, [_createElementVNode(\"div\", {\n    id: \"map\",\n    class: \"h-96 lg:h-[600px] w-full\"\n  })], -1 /* HOISTED */)), _createCommentVNode(\" Vehicle List \"), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, [_cache[15] || (_cache[15] = _createElementVNode(\"h3\", {\n    class: \"text-lg font-medium text-gray-900 mb-4\"\n  }, \"Vehículos en Tiempo Real\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_11, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.filteredLocations, location => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: location.vehiculo_id,\n      class: \"border rounded-lg p-4 hover:bg-gray-50 cursor-pointer\",\n      onClick: $event => $setup.focusVehicle(location)\n    }, [_createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"h4\", _hoisted_14, _toDisplayString(location.vehiculo?.matricula), 1 /* TEXT */), _createElementVNode(\"span\", {\n      class: _normalizeClass([\"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium\", $setup.getSpeedClass(location.velocidad)])\n    }, _toDisplayString(location.velocidad) + \" km/h \", 3 /* TEXT, CLASS */)]), _createElementVNode(\"p\", _hoisted_15, _toDisplayString(location.vehiculo?.marca?.nombre) + \" \" + _toDisplayString(location.vehiculo?.modelo), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_16, [_cache[11] || (_cache[11] = _createElementVNode(\"strong\", null, \"Usuario:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(location.vehiculo?.asignacion_actual?.usuario_nombre || 'Sin asignar'), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_17, [_createElementVNode(\"p\", null, [_cache[12] || (_cache[12] = _createElementVNode(\"strong\", null, \"Lat:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(location.latitud.toFixed(6)), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[13] || (_cache[13] = _createElementVNode(\"strong\", null, \"Lng:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(location.longitud.toFixed(6)), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[14] || (_cache[14] = _createElementVNode(\"strong\", null, \"Última actualización:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString($setup.formatDate(location.timestamp_gps)), 1 /* TEXT */)])])], 8 /* PROPS */, _hoisted_12);\n  }), 128 /* KEYED_FRAGMENT */))])])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createCommentVNode","_createElementVNode","_hoisted_2","_hoisted_3","onClick","$setup","toggleAutoRefresh","_normalizeClass","autoRefresh","_createVNode","_toDisplayString","refreshLocations","_hoisted_4","_hoisted_5","selectedUser","$event","onChange","filterVehicles","value","_Fragment","_renderList","users","user","key","id","nombre","apellido","_hoisted_6","selectedVehicle","vehicles","vehicle","matricula","modelo","_hoisted_7","_hoisted_8","showRoutes","type","for","centerMap","_hoisted_9","_hoisted_10","_hoisted_11","filteredLocations","location","vehiculo_id","focusVehicle","_hoisted_13","_hoisted_14","vehiculo","getSpeedClass","velocidad","_hoisted_15","marca","_hoisted_16","asignacion_actual","usuario_nombre","_hoisted_17","latitud","toFixed","longitud","formatDate","timestamp_gps"],"sources":["C:\\Users\\MG\\Documents\\Proyecto\\Proyecto 2\\frontend\\src\\views\\admin\\Mapa.vue"],"sourcesContent":["<template>\n  <div class=\"space-y-6\">\n    <!-- Header -->\n    <div class=\"md:flex md:items-center md:justify-between\">\n      <div class=\"min-w-0 flex-1\">\n        <h2 class=\"text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight\">\n          Mapa GPS - Todas las Ubicaciones\n        </h2>\n      </div>\n      <div class=\"mt-4 flex md:mt-0 space-x-2\">\n        <button\n          @click=\"toggleAutoRefresh\"\n          :class=\"[\n            'inline-flex items-center rounded-md px-3 py-2 text-sm font-semibold shadow-sm',\n            autoRefresh \n              ? 'bg-green-600 text-white hover:bg-green-700' \n              : 'bg-gray-600 text-white hover:bg-gray-700'\n          ]\"\n        >\n          <ArrowPathIcon class=\"-ml-0.5 mr-1.5 h-5 w-5\" :class=\"{ 'animate-spin': autoRefresh }\" />\n          {{ autoRefresh ? 'Auto-actualización ON' : 'Auto-actualización OFF' }}\n        </button>\n        <button\n          @click=\"refreshLocations\"\n          class=\"inline-flex items-center rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-700\"\n        >\n          <MapPinIcon class=\"-ml-0.5 mr-1.5 h-5 w-5\" />\n          Actualizar Ubicaciones\n        </button>\n      </div>\n    </div>\n\n    <!-- Map Controls -->\n    <div class=\"bg-white shadow rounded-lg p-4\">\n      <div class=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        <div>\n          <label class=\"block text-sm font-medium text-gray-700 mb-1\">Filtrar por Usuario</label>\n          <select\n            v-model=\"selectedUser\"\n            @change=\"filterVehicles\"\n            class=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm\"\n          >\n            <option value=\"\">Todos los usuarios</option>\n            <option v-for=\"user in users\" :key=\"user.id\" :value=\"user.id\">\n              {{ user.nombre }} {{ user.apellido }}\n            </option>\n          </select>\n        </div>\n        <div>\n          <label class=\"block text-sm font-medium text-gray-700 mb-1\">Filtrar por Vehículo</label>\n          <select\n            v-model=\"selectedVehicle\"\n            @change=\"filterVehicles\"\n            class=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm\"\n          >\n            <option value=\"\">Todos los vehículos</option>\n            <option v-for=\"vehicle in vehicles\" :key=\"vehicle.id\" :value=\"vehicle.id\">\n              {{ vehicle.matricula }} - {{ vehicle.modelo }}\n            </option>\n          </select>\n        </div>\n        <div>\n          <label class=\"block text-sm font-medium text-gray-700 mb-1\">Mostrar Rutas</label>\n          <div class=\"flex items-center\">\n            <input\n              id=\"show-routes\"\n              v-model=\"showRoutes\"\n              type=\"checkbox\"\n              class=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n            />\n            <label for=\"show-routes\" class=\"ml-2 block text-sm text-gray-900\">\n              Mostrar trayectorias\n            </label>\n          </div>\n        </div>\n        <div class=\"flex items-end\">\n          <button\n            @click=\"centerMap\"\n            class=\"w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50\"\n          >\n            Centrar Mapa\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- Map Container -->\n    <div class=\"bg-white shadow rounded-lg overflow-hidden\">\n      <div id=\"map\" class=\"h-96 lg:h-[600px] w-full\"></div>\n    </div>\n\n    <!-- Vehicle List -->\n    <div class=\"bg-white shadow rounded-lg\">\n      <div class=\"px-4 py-5 sm:p-6\">\n        <h3 class=\"text-lg font-medium text-gray-900 mb-4\">Vehículos en Tiempo Real</h3>\n        <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n          <div\n            v-for=\"location in filteredLocations\"\n            :key=\"location.vehiculo_id\"\n            class=\"border rounded-lg p-4 hover:bg-gray-50 cursor-pointer\"\n            @click=\"focusVehicle(location)\"\n          >\n            <div class=\"flex items-center justify-between mb-2\">\n              <h4 class=\"font-medium text-gray-900\">{{ location.vehiculo?.matricula }}</h4>\n              <span\n                class=\"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium\"\n                :class=\"getSpeedClass(location.velocidad)\"\n              >\n                {{ location.velocidad }} km/h\n              </span>\n            </div>\n            <p class=\"text-sm text-gray-600 mb-1\">\n              {{ location.vehiculo?.marca?.nombre }} {{ location.vehiculo?.modelo }}\n            </p>\n            <p class=\"text-sm text-gray-600 mb-2\">\n              <strong>Usuario:</strong> {{ location.vehiculo?.asignacion_actual?.usuario_nombre || 'Sin asignar' }}\n            </p>\n            <div class=\"text-xs text-gray-500\">\n              <p><strong>Lat:</strong> {{ location.latitud.toFixed(6) }}</p>\n              <p><strong>Lng:</strong> {{ location.longitud.toFixed(6) }}</p>\n              <p><strong>Última actualización:</strong> {{ formatDate(location.timestamp_gps) }}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, onUnmounted, computed } from 'vue'\nimport { ArrowPathIcon, MapPinIcon } from '@heroicons/vue/24/outline'\nimport L from 'leaflet'\nimport api from '../../services/api'\nimport { useToast } from 'vue-toastification'\nimport { format } from 'date-fns'\nimport { es } from 'date-fns/locale'\nimport io from 'socket.io-client'\n\nconst toast = useToast()\n\nconst map = ref(null)\nconst socket = ref(null)\nconst autoRefresh = ref(true)\nconst showRoutes = ref(false)\nconst selectedUser = ref('')\nconst selectedVehicle = ref('')\n\nconst locations = ref([])\nconst users = ref([])\nconst vehicles = ref([])\nconst markers = ref(new Map())\nconst routes = ref(new Map())\n\nconst filteredLocations = computed(() => {\n  return locations.value.filter(location => {\n    const matchesUser = !selectedUser.value || \n      location.vehiculo?.asignacion_actual?.usuario_id == selectedUser.value\n    \n    const matchesVehicle = !selectedVehicle.value || \n      location.vehiculo_id == selectedVehicle.value\n    \n    return matchesUser && matchesVehicle\n  })\n})\n\nconst initMap = () => {\n  map.value = L.map('map').setView([19.432608, -99.133209], 10)\n  \n  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    attribution: '© OpenStreetMap contributors'\n  }).addTo(map.value)\n}\n\nconst initSocket = () => {\n  socket.value = io(import.meta.env.VITE_API_URL || 'http://localhost:8080')\n  \n  socket.value.on('location-update', (data) => {\n    updateVehicleLocation(data)\n  })\n  \n  socket.value.on('connect', () => {\n    console.log('Conectado al servidor de ubicaciones')\n  })\n  \n  socket.value.on('disconnect', () => {\n    console.log('Desconectado del servidor de ubicaciones')\n  })\n}\n\nconst fetchData = async () => {\n  try {\n    const [locationsRes, usersRes, vehiclesRes] = await Promise.all([\n      api.get('/ubicaciones/latest'),\n      api.get('/usuarios?rol=usuario&activo=true'),\n      api.get('/vehiculos?estado=asignado')\n    ])\n    \n    locations.value = locationsRes.data.data\n    users.value = usersRes.data.data\n    vehicles.value = vehiclesRes.data.data\n    \n    updateMapMarkers()\n  } catch (error) {\n    toast.error('Error al cargar las ubicaciones')\n  }\n}\n\nconst updateMapMarkers = () => {\n  // Limpiar marcadores existentes\n  markers.value.forEach(marker => {\n    map.value.removeLayer(marker)\n  })\n  markers.value.clear()\n\n  // Agregar nuevos marcadores\n  filteredLocations.value.forEach(location => {\n    const marker = L.marker([location.latitud, location.longitud])\n      .bindPopup(`\n        <div class=\"p-2\">\n          <h3 class=\"font-bold\">${location.vehiculo?.matricula}</h3>\n          <p>${location.vehiculo?.marca?.nombre} ${location.vehiculo?.modelo}</p>\n          <p><strong>Usuario:</strong> ${location.vehiculo?.asignacion_actual?.usuario_nombre || 'Sin asignar'}</p>\n          <p><strong>Velocidad:</strong> ${location.velocidad} km/h</p>\n          <p><strong>Dirección:</strong> ${location.direccion}°</p>\n          <p><strong>Actualizado:</strong> ${formatDate(location.timestamp_gps)}</p>\n        </div>\n      `)\n      .addTo(map.value)\n    \n    markers.value.set(location.vehiculo_id, marker)\n  })\n}\n\nconst updateVehicleLocation = (locationData) => {\n  // Actualizar en la lista de ubicaciones\n  const index = locations.value.findIndex(loc => loc.vehiculo_id === locationData.vehiculo_id)\n  if (index !== -1) {\n    locations.value[index] = locationData\n  } else {\n    locations.value.push(locationData)\n  }\n  \n  // Actualizar marcador en el mapa\n  const marker = markers.value.get(locationData.vehiculo_id)\n  if (marker) {\n    marker.setLatLng([locationData.latitud, locationData.longitud])\n    marker.getPopup().setContent(`\n      <div class=\"p-2\">\n        <h3 class=\"font-bold\">${locationData.vehiculo?.matricula}</h3>\n        <p>${locationData.vehiculo?.marca?.nombre} ${locationData.vehiculo?.modelo}</p>\n        <p><strong>Usuario:</strong> ${locationData.vehiculo?.asignacion_actual?.usuario_nombre || 'Sin asignar'}</p>\n        <p><strong>Velocidad:</strong> ${locationData.velocidad} km/h</p>\n        <p><strong>Dirección:</strong> ${locationData.direccion}°</p>\n        <p><strong>Actualizado:</strong> ${formatDate(locationData.timestamp_gps)}</p>\n      </div>\n    `)\n  }\n}\n\nconst refreshLocations = async () => {\n  await fetchData()\n  toast.success('Ubicaciones actualizadas')\n}\n\nconst toggleAutoRefresh = () => {\n  autoRefresh.value = !autoRefresh.value\n  if (autoRefresh.value) {\n    toast.success('Auto-actualización activada')\n  } else {\n    toast.info('Auto-actualización desactivada')\n  }\n}\n\nconst filterVehicles = () => {\n  updateMapMarkers()\n}\n\nconst focusVehicle = (location) => {\n  map.value.setView([location.latitud, location.longitud], 15)\n  const marker = markers.value.get(location.vehiculo_id)\n  if (marker) {\n    marker.openPopup()\n  }\n}\n\nconst centerMap = () => {\n  if (filteredLocations.value.length > 0) {\n    const group = new L.featureGroup(Array.from(markers.value.values()))\n    map.value.fitBounds(group.getBounds().pad(0.1))\n  } else {\n    map.value.setView([19.432608, -99.133209], 10)\n  }\n}\n\nconst getSpeedClass = (speed) => {\n  if (speed === 0) return 'bg-gray-100 text-gray-800'\n  if (speed <= 30) return 'bg-green-100 text-green-800'\n  if (speed <= 60) return 'bg-yellow-100 text-yellow-800'\n  return 'bg-red-100 text-red-800'\n}\n\nconst formatDate = (date) => {\n  return format(new Date(date), 'dd/MM/yyyy HH:mm:ss', { locale: es })\n}\n\nonMounted(async () => {\n  initMap()\n  initSocket()\n  await fetchData()\n})\n\nonUnmounted(() => {\n  if (socket.value) {\n    socket.value.disconnect()\n  }\n})\n</script>\n\n<style>\n@import 'leaflet/dist/leaflet.css';\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
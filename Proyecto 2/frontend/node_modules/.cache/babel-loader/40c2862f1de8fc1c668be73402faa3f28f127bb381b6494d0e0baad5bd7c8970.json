{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, onMounted, computed } from 'vue';\nimport { TruckIcon, CheckCircleIcon, UserGroupIcon, UsersIcon, PlusIcon, PencilIcon, TrashIcon } from '@heroicons/vue/24/outline';\nimport { Doughnut, Bar } from 'vue-chartjs';\nimport { Chart as ChartJS, Title, Tooltip, Legend, BarElement, CategoryScale, LinearScale, ArcElement } from 'chart.js';\nimport api from '../../services/api';\nimport { format } from 'date-fns';\nimport { es } from 'date-fns/locale';\nexport default {\n  __name: 'Dashboard',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    ChartJS.register(Title, Tooltip, Legend, BarElement, CategoryScale, LinearScale, ArcElement);\n    const stats = ref({});\n    const recentActivity = ref([]);\n    const loading = ref(true);\n    const chartOptions = {\n      responsive: true,\n      maintainAspectRatio: false,\n      plugins: {\n        legend: {\n          position: 'bottom'\n        }\n      }\n    };\n    const vehicleStatusData = computed(() => ({\n      labels: ['Disponibles', 'Asignados', 'Mantenimiento', 'Fuera de Servicio'],\n      datasets: [{\n        data: [stats.value.vehiculos_disponibles || 0, stats.value.vehiculos_asignados || 0, stats.value.vehiculos_mantenimiento || 0, stats.value.vehiculos_fuera_servicio || 0],\n        backgroundColor: ['#10B981', '#3B82F6', '#F59E0B', '#EF4444']\n      }]\n    }));\n    const vehicleBrandData = computed(() => ({\n      labels: stats.value.marcas_vehiculos?.map(m => m.marca) || [],\n      datasets: [{\n        label: 'Cantidad',\n        data: stats.value.marcas_vehiculos?.map(m => m.cantidad) || [],\n        backgroundColor: '#3B82F6'\n      }]\n    }));\n    const fetchDashboardData = async () => {\n      try {\n        loading.value = true;\n        const [statsResponse, activityResponse] = await Promise.all([api.get('/dashboard/stats'), api.get('/dashboard/activity')]);\n        stats.value = statsResponse.data.data;\n        recentActivity.value = activityResponse.data.data;\n      } catch (error) {\n        console.error('Error fetching dashboard data:', error);\n      } finally {\n        loading.value = false;\n      }\n    };\n    const getActivityIcon = type => {\n      switch (type) {\n        case 'create':\n          return PlusIcon;\n        case 'update':\n          return PencilIcon;\n        case 'delete':\n          return TrashIcon;\n        default:\n          return PlusIcon;\n      }\n    };\n    const formatDate = date => {\n      return format(new Date(date), 'dd MMM yyyy HH:mm', {\n        locale: es\n      });\n    };\n    onMounted(() => {\n      fetchDashboardData();\n    });\n    const __returned__ = {\n      stats,\n      recentActivity,\n      loading,\n      chartOptions,\n      vehicleStatusData,\n      vehicleBrandData,\n      fetchDashboardData,\n      getActivityIcon,\n      formatDate,\n      ref,\n      onMounted,\n      computed,\n      get TruckIcon() {\n        return TruckIcon;\n      },\n      get CheckCircleIcon() {\n        return CheckCircleIcon;\n      },\n      get UserGroupIcon() {\n        return UserGroupIcon;\n      },\n      get UsersIcon() {\n        return UsersIcon;\n      },\n      get PlusIcon() {\n        return PlusIcon;\n      },\n      get PencilIcon() {\n        return PencilIcon;\n      },\n      get TrashIcon() {\n        return TrashIcon;\n      },\n      get Doughnut() {\n        return Doughnut;\n      },\n      get Bar() {\n        return Bar;\n      },\n      get ChartJS() {\n        return ChartJS;\n      },\n      get Title() {\n        return Title;\n      },\n      get Tooltip() {\n        return Tooltip;\n      },\n      get Legend() {\n        return Legend;\n      },\n      get BarElement() {\n        return BarElement;\n      },\n      get CategoryScale() {\n        return CategoryScale;\n      },\n      get LinearScale() {\n        return LinearScale;\n      },\n      get ArcElement() {\n        return ArcElement;\n      },\n      get api() {\n        return api;\n      },\n      get format() {\n        return format;\n      },\n      get es() {\n        return es;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","computed","TruckIcon","CheckCircleIcon","UserGroupIcon","UsersIcon","PlusIcon","PencilIcon","TrashIcon","Doughnut","Bar","Chart","ChartJS","Title","Tooltip","Legend","BarElement","CategoryScale","LinearScale","ArcElement","api","format","es","register","stats","recentActivity","loading","chartOptions","responsive","maintainAspectRatio","plugins","legend","position","vehicleStatusData","labels","datasets","data","value","vehiculos_disponibles","vehiculos_asignados","vehiculos_mantenimiento","vehiculos_fuera_servicio","backgroundColor","vehicleBrandData","marcas_vehiculos","map","m","marca","label","cantidad","fetchDashboardData","statsResponse","activityResponse","Promise","all","get","error","console","getActivityIcon","type","formatDate","date","Date","locale"],"sources":["C:/Users/MG/Documents/Proyecto/Proyecto 2/frontend/src/views/admin/Dashboard.vue"],"sourcesContent":["<template>\n  <div class=\"space-y-6\">\n    <!-- Header -->\n    <div class=\"md:flex md:items-center md:justify-between\">\n      <div class=\"min-w-0 flex-1\">\n        <h2 class=\"text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight\">\n          Dashboard Administrativo\n        </h2>\n      </div>\n    </div>\n\n    <!-- Stats -->\n    <div class=\"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4\">\n      <div class=\"bg-white overflow-hidden shadow rounded-lg\">\n        <div class=\"p-5\">\n          <div class=\"flex items-center\">\n            <div class=\"flex-shrink-0\">\n              <TruckIcon class=\"h-6 w-6 text-gray-400\" />\n            </div>\n            <div class=\"ml-5 w-0 flex-1\">\n              <dl>\n                <dt class=\"text-sm font-medium text-gray-500 truncate\">Total Vehículos</dt>\n                <dd class=\"text-lg font-medium text-gray-900\">{{ stats.total_vehiculos || 0 }}</dd>\n              </dl>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"bg-white overflow-hidden shadow rounded-lg\">\n        <div class=\"p-5\">\n          <div class=\"flex items-center\">\n            <div class=\"flex-shrink-0\">\n              <CheckCircleIcon class=\"h-6 w-6 text-green-400\" />\n            </div>\n            <div class=\"ml-5 w-0 flex-1\">\n              <dl>\n                <dt class=\"text-sm font-medium text-gray-500 truncate\">Disponibles</dt>\n                <dd class=\"text-lg font-medium text-gray-900\">{{ stats.vehiculos_disponibles || 0 }}</dd>\n              </dl>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"bg-white overflow-hidden shadow rounded-lg\">\n        <div class=\"p-5\">\n          <div class=\"flex items-center\">\n            <div class=\"flex-shrink-0\">\n              <UserGroupIcon class=\"h-6 w-6 text-blue-400\" />\n            </div>\n            <div class=\"ml-5 w-0 flex-1\">\n              <dl>\n                <dt class=\"text-sm font-medium text-gray-500 truncate\">Asignados</dt>\n                <dd class=\"text-lg font-medium text-gray-900\">{{ stats.vehiculos_asignados || 0 }}</dd>\n              </dl>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"bg-white overflow-hidden shadow rounded-lg\">\n        <div class=\"p-5\">\n          <div class=\"flex items-center\">\n            <div class=\"flex-shrink-0\">\n              <UsersIcon class=\"h-6 w-6 text-purple-400\" />\n            </div>\n            <div class=\"ml-5 w-0 flex-1\">\n              <dl>\n                <dt class=\"text-sm font-medium text-gray-500 truncate\">Total Usuarios</dt>\n                <dd class=\"text-lg font-medium text-gray-900\">{{ stats.total_usuarios || 0 }}</dd>\n              </dl>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Charts -->\n    <div class=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n      <!-- Vehículos por Estado -->\n      <div class=\"bg-white shadow rounded-lg p-6\">\n        <h3 class=\"text-lg font-medium text-gray-900 mb-4\">Vehículos por Estado</h3>\n        <div class=\"h-64\">\n          <Doughnut :data=\"vehicleStatusData\" :options=\"chartOptions\" />\n        </div>\n      </div>\n\n      <!-- Vehículos por Marca -->\n      <div class=\"bg-white shadow rounded-lg p-6\">\n        <h3 class=\"text-lg font-medium text-gray-900 mb-4\">Vehículos por Marca</h3>\n        <div class=\"h-64\">\n          <Bar :data=\"vehicleBrandData\" :options=\"chartOptions\" />\n        </div>\n      </div>\n    </div>\n\n    <!-- Recent Activity -->\n    <div class=\"bg-white shadow rounded-lg\">\n      <div class=\"px-4 py-5 sm:p-6\">\n        <h3 class=\"text-lg font-medium text-gray-900 mb-4\">Actividad Reciente</h3>\n        <div class=\"flow-root\">\n          <ul class=\"-mb-8\">\n            <li v-for=\"(activity, index) in recentActivity\" :key=\"activity.id\" class=\"relative pb-8\">\n              <div v-if=\"index !== recentActivity.length - 1\" class=\"absolute top-4 left-4 -ml-px h-full w-0.5 bg-gray-200\"></div>\n              <div class=\"relative flex space-x-3\">\n                <div>\n                  <span class=\"h-8 w-8 rounded-full bg-blue-500 flex items-center justify-center ring-8 ring-white\">\n                    <component :is=\"getActivityIcon(activity.type)\" class=\"h-4 w-4 text-white\" />\n                  </span>\n                </div>\n                <div class=\"min-w-0 flex-1 pt-1.5 flex justify-between space-x-4\">\n                  <div>\n                    <p class=\"text-sm text-gray-500\">{{ activity.description }}</p>\n                  </div>\n                  <div class=\"text-right text-sm whitespace-nowrap text-gray-500\">\n                    {{ formatDate(activity.created_at) }}\n                  </div>\n                </div>\n              </div>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, computed } from 'vue'\nimport { \n  TruckIcon, \n  CheckCircleIcon, \n  UserGroupIcon, \n  UsersIcon,\n  PlusIcon,\n  PencilIcon,\n  TrashIcon\n} from '@heroicons/vue/24/outline'\nimport { Doughnut, Bar } from 'vue-chartjs'\nimport {\n  Chart as ChartJS,\n  Title,\n  Tooltip,\n  Legend,\n  BarElement,\n  CategoryScale,\n  LinearScale,\n  ArcElement\n} from 'chart.js'\nimport api from '../../services/api'\nimport { format } from 'date-fns'\nimport { es } from 'date-fns/locale'\n\nChartJS.register(Title, Tooltip, Legend, BarElement, CategoryScale, LinearScale, ArcElement)\n\nconst stats = ref({})\nconst recentActivity = ref([])\nconst loading = ref(true)\n\nconst chartOptions = {\n  responsive: true,\n  maintainAspectRatio: false,\n  plugins: {\n    legend: {\n      position: 'bottom'\n    }\n  }\n}\n\nconst vehicleStatusData = computed(() => ({\n  labels: ['Disponibles', 'Asignados', 'Mantenimiento', 'Fuera de Servicio'],\n  datasets: [{\n    data: [\n      stats.value.vehiculos_disponibles || 0,\n      stats.value.vehiculos_asignados || 0,\n      stats.value.vehiculos_mantenimiento || 0,\n      stats.value.vehiculos_fuera_servicio || 0\n    ],\n    backgroundColor: [\n      '#10B981',\n      '#3B82F6',\n      '#F59E0B',\n      '#EF4444'\n    ]\n  }]\n}))\n\nconst vehicleBrandData = computed(() => ({\n  labels: stats.value.marcas_vehiculos?.map(m => m.marca) || [],\n  datasets: [{\n    label: 'Cantidad',\n    data: stats.value.marcas_vehiculos?.map(m => m.cantidad) || [],\n    backgroundColor: '#3B82F6'\n  }]\n}))\n\nconst fetchDashboardData = async () => {\n  try {\n    loading.value = true\n    const [statsResponse, activityResponse] = await Promise.all([\n      api.get('/dashboard/stats'),\n      api.get('/dashboard/activity')\n    ])\n    \n    stats.value = statsResponse.data.data\n    recentActivity.value = activityResponse.data.data\n  } catch (error) {\n    console.error('Error fetching dashboard data:', error)\n  } finally {\n    loading.value = false\n  }\n}\n\nconst getActivityIcon = (type) => {\n  switch (type) {\n    case 'create': return PlusIcon\n    case 'update': return PencilIcon\n    case 'delete': return TrashIcon\n    default: return PlusIcon\n  }\n}\n\nconst formatDate = (date) => {\n  return format(new Date(date), 'dd MMM yyyy HH:mm', { locale: es })\n}\n\nonMounted(() => {\n  fetchDashboardData()\n})\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}